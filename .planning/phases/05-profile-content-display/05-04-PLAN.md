---
phase: 05-profile-content-display
plan: 04
type: execute
wave: 3
depends_on: ["05-01", "05-02", "05-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Profile banner full variant visually matches Bluesky-native style with header, overlapping avatar, and stats"
    - "Profile banner compact variant shows header as background with overlaid content"
    - "GIF posts render as inline animated images"
    - "Empty feed shows friendly message"
    - "Skeleton loaders appear during content loading"
    - "All three profile banner interfaces (block, shortcode, widget) work correctly"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 5 features end-to-end: profile banner variants, Gutenberg block, shortcode, widget, GIF rendering, skeleton loaders, empty/stale states.

Purpose: Human verification ensures visual quality and functional correctness of all display features before marking phase complete.
Output: Verified phase or list of issues to fix.
</objective>

<execution_context>
@/Users/CRG/.claude/get-shit-done/workflows/execute-plan.md
@/Users/CRG/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-profile-content-display/05-01-SUMMARY.md
@.planning/phases/05-profile-content-display/05-02-SUMMARY.md
@.planning/phases/05-profile-content-display/05-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integration wiring and smoke test</name>
  <files>classes/BlueSky_Plugin_Setup.php</files>
  <action>
Ensure all new components are properly wired into the plugin initialization:

1. **Widget file require:** Verify `classes/widgets/BlueSky_Profile_Banner_Widget.php` is required/included in the plugin bootstrap (check main plugin file or existing widget file includes — follow the same pattern as `BlueSky_Profile_Widget` and `BlueSky_Posts_Widget`).

2. **Asset enqueuing verification:** Confirm the profile banner CSS and gradient JS are enqueued in BlueSky_Assets_Service. Check both admin (for block editor) and frontend contexts.

3. **Shortcode registration:** Confirm `bluesky_profile_banner` shortcode is registered in Render_Front's `init_hooks()`.

4. **Block registration:** Confirm `bluesky-social/profile-banner` block is registered in Blocks_Service.

5. **Widget registration:** Confirm `BlueSky_Profile_Banner_Widget` is registered in Blocks_Service's `register_widgets()`.

6. **Quick functional test:** Create a test page (or document how to test) with:
   - `[bluesky_profile_banner layout="full"]` shortcode
   - `[bluesky_profile_banner layout="compact"]` shortcode
   - Existing `[bluesky_profile]` shortcode (verify not broken)
   - Existing `[bluesky_last_posts]` shortcode (verify not broken)

Fix any wiring issues found (missing requires, incorrect hook priorities, missing enqueues).
  </action>
  <verify>
No PHP errors on frontend page with all shortcodes.
Profile banner renders HTML output (not empty).
Existing profile card and posts feed still render correctly.
  </verify>
  <done>
All new components properly wired into plugin. No PHP errors. Both new and existing shortcodes/blocks/widgets functional.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual and functional verification</name>
  <files>none</files>
  <action>
Phase 5 profile banner (two variants) with Gutenberg block, shortcode, widget, plus feed enhancements (GIF detection, skeleton loaders, empty/stale states). Human verifies visual output and functional correctness.

**Profile Banner — Full Variant:**
1. Add `[bluesky_profile_banner layout="full"]` to a page
2. Verify: wide header image (or gradient fallback), overlapping circular avatar, display name linked to Bluesky profile, handle, bio, follower/following/post counts
3. Resize browser to mobile width — verify responsive layout

**Profile Banner — Compact Variant:**
4. Add `[bluesky_profile_banner layout="compact"]` to same page
5. Verify: header image as background with dark overlay, avatar, name, stats overlaid in white text
6. Verify responsive at mobile width

**Gutenberg Block:**
7. Edit page in Gutenberg, insert "Bluesky Profile Banner" block
8. Verify inspector controls: Layout (Full/Compact), Account selector, Theme
9. Switch between Full and Compact — preview should update via ServerSideRender

**Classic Widget:**
10. Go to Appearance > Widgets, add "Bluesky Profile Banner" widget to sidebar
11. Verify form fields: Title, Layout dropdown, Account selector
12. Save and view frontend — widget renders correctly

**Gradient Fallback:**
13. If a connected Bluesky account has no header image, verify gradient appears (not broken layout)
14. If all accounts have header images, this is N/A

**Feed Enhancements:**
15. View `[bluesky_last_posts]` — verify posts render normally
16. Check if any GIF posts exist — if so, verify they render as inline animated images (not link cards)
17. Verify reply/repost filter toggles still work (if configured in plugin settings)
18. Check empty state by using a filter that results in no posts (or testing with account that has no posts)

**Existing Features:**
19. Verify `[bluesky_profile]` profile card still works correctly
20. Verify existing posts feed layout unchanged
  </action>
  <verify>Type "approved" if all checks pass, or describe specific issues to fix.</verify>
  <done>Human has verified all Phase 5 features visually and functionally — profile banner variants, block/shortcode/widget, gradient fallback, GIF rendering, skeleton loaders, empty/stale states, and no regressions in existing features.</done>
</task>

</tasks>

<verification>
1. All Phase 5 components properly integrated into plugin
2. No PHP errors or warnings
3. Profile banner renders correctly in both variants
4. Block, shortcode, and widget all produce expected output
5. Feed enhancements work without breaking existing functionality
6. Human has visually verified the output
</verification>

<success_criteria>
- Human approves visual appearance and functionality of all Phase 5 features
- No regressions in existing profile card or posts feed
- All three profile banner interfaces functional
</success_criteria>

<output>
After completion, create `.planning/phases/05-profile-content-display/05-04-SUMMARY.md`
</output>
